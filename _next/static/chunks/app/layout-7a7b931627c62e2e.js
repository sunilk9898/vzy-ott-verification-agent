(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{39665:function(e,t,r){Promise.resolve().then(r.t.bind(r,87621,23)),Promise.resolve().then(r.t.bind(r,57736,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,89454))},94766:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},61641:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]])},25330:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},40476:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])},10866:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},11239:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},89454:function(e,t,r){"use strict";r.d(t,{Shell:function(){return q}});var n=r(57437),a=r(2265),s=r(99376),c=r(27648),o=r(79205);let l=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var i=r(88906),d=r(40476),u=r(25330),h=r(10866),f=r(95805);let x=(0,o.Z)("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);var m=r(11239),p=r(10407);let g=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var b=r(93448),y=r(92371);let v=[{label:"Overview",href:"/",icon:l,roles:["admin","devops","developer","executive"]},{label:"Security",href:"/security",icon:i.Z,roles:["admin","devops","developer","executive"]},{label:"Performance",href:"/performance",icon:d.Z,roles:["admin","devops","developer","executive"]},{label:"Code Quality",href:"/code-quality",icon:u.Z,roles:["admin","devops","developer","executive"]},{label:"Control Center",href:"/control-center",icon:h.Z,roles:["admin","devops"]},{label:"Users",href:"/users",icon:f.Z,roles:["admin"]},{label:"Reporting",href:"/reporting",icon:x,roles:["admin","devops","developer","executive"]}];function k(){let e=(0,s.usePathname)(),{sidebarCollapsed:t,toggleSidebar:r}=(0,y.HB)(),{user:a}=(0,y.tN)(),o=v.filter(e=>!a||e.roles.includes(a.role));return(0,n.jsxs)("aside",{className:(0,b.cn)("fixed left-0 top-0 z-40 h-screen flex flex-col border-r border-white/[0.06] bg-surface-1 transition-all duration-300",t?"w-[68px]":"w-[240px]"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 px-4 h-16 border-b border-white/[0.06]",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-gradient-to-br from-brand-500 to-cyan-500 flex items-center justify-center",children:(0,n.jsx)(m.Z,{className:"w-4 h-4 text-white"})}),!t&&(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("div",{className:"text-sm font-bold text-white tracking-tight",children:"VZY Agent"}),(0,n.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"OTT Monitor"})]})]}),(0,n.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.map(r=>{let a=e===r.href||"/"!==r.href&&e.startsWith(r.href),s=r.icon;return(0,n.jsxs)(c.default,{href:r.href,className:(0,b.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 group",a?"bg-brand-600/15 text-brand-400 border-glow":"text-gray-400 hover:text-gray-200 hover:bg-white/[0.04]"),children:[(0,n.jsx)(s,{className:(0,b.cn)("w-[18px] h-[18px] flex-shrink-0 transition-colors",a?"text-brand-400":"text-gray-500 group-hover:text-gray-300")}),!t&&(0,n.jsx)("span",{className:"truncate",children:r.label})]},r.href)})}),(0,n.jsx)("div",{className:"p-3 border-t border-white/[0.06]",children:(0,n.jsx)("button",{onClick:r,className:"w-full flex items-center justify-center p-2 rounded-lg text-gray-500 hover:text-gray-300 hover:bg-white/[0.04] transition-colors","aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?(0,n.jsx)(p.Z,{className:"w-4 h-4"}):(0,n.jsx)(g,{className:"w-4 h-4"})})})]})}var w=r(71837),N=r(51817),j=r(61641);let _=(0,o.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var Z=r(94766);let M=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),S=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function F(){let{report:e}=(0,y.nq)(),{user:t,logout:r}=(0,y.tN)(),{activeScan:a,setActiveScan:s}=(0,y.rG)(),c=e?(0,b.Uc)(e.kpiScore.overallScore):null;return(0,n.jsxs)("header",{className:"h-16 border-b border-white/[0.06] bg-surface-1/80 backdrop-blur-lg flex items-center justify-between px-6 sticky top-0 z-30",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:(0,b.cn)("status-dot","healthy"===c&&"status-dot-healthy","warning"===c&&"status-dot-warning","critical"===c&&"status-dot-critical")}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-200",children:e.target.url||e.target.repoPath})]}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["Last scan: ",(0,b.Sy)(e.generatedAt)]})]}),a&&(0,n.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-brand-600/15 border border-brand-500/30",children:[(0,n.jsx)(N.Z,{className:"w-3.5 h-3.5 text-brand-400 animate-spin"}),(0,n.jsx)("span",{className:"text-xs font-medium text-brand-400",children:"Scanning..."}),(0,n.jsx)("button",{onClick:async()=>{try{await (0,w.bx)(a.scanId)}catch(e){}s(null)},className:"ml-1 p-0.5 rounded hover:bg-red-500/20 transition-colors",title:"Abort scan",children:(0,n.jsx)(j.Z,{className:"w-3.5 h-3.5 text-red-400"})})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("button",{className:"btn-ghost p-2 relative","aria-label":"System health",children:[(0,n.jsx)(_,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-kpi-pass"})]}),(0,n.jsxs)("button",{className:"btn-ghost p-2 relative","aria-label":"Notifications",children:[(0,n.jsx)(Z.Z,{className:"w-4 h-4"}),e&&e.criticalFindings.length>0&&(0,n.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 flex items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white",children:e.criticalFindings.length>9?"9+":e.criticalFindings.length})]}),t&&(0,n.jsxs)("div",{className:"flex items-center gap-2 pl-3 border-l border-white/[0.06]",children:[(0,n.jsx)("div",{className:"w-7 h-7 rounded-full bg-brand-600/30 flex items-center justify-center",children:(0,n.jsx)(M,{className:"w-3.5 h-3.5 text-brand-400"})}),(0,n.jsxs)("div",{className:"hidden sm:block",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-gray-200",children:t.name}),(0,n.jsx)("div",{className:"text-[10px] text-gray-500 uppercase",children:t.role})]}),(0,n.jsx)("button",{onClick:()=>{r(),window.location.href="/login"},className:"btn-ghost p-1.5 ml-1","aria-label":"Logout",children:(0,n.jsx)(S,{className:"w-3.5 h-3.5"})})]})]})]})}var C=r(79286);function q(e){let{children:t}=e,{sidebarCollapsed:r}=(0,y.HB)(),{target:c,setReport:o,setLoading:l,setError:i}=(0,y.nq)(),{token:d}=(0,y.tN)(),{completeScan:u,setActiveScan:h}=(0,y.rG)(),f=(0,s.usePathname)(),x=(0,s.useRouter)(),m="/login"===f;return((0,a.useEffect)(()=>{d||m||x.replace("/login")},[d,m,x]),(0,a.useEffect)(()=>{if(!d||m||!c)return;let e=!1;return l(!0),(0,w.IK)(c).then(t=>{e||o(t)}).catch(t=>{e||i(t.message)}),()=>{e=!0}},[d,m,c,o,l,i]),(0,a.useEffect)(()=>{if(!d||m)return;(0,C.$j)();let e=(0,C.gN)(e=>{u(e.scanId,e.score,e.status),c&&(0,w.IK)(c).then(o).catch(()=>{})}),t=(0,C.DF)(e=>{h(null)});return()=>{e(),t(),(0,C.zP)()}},[d,m,c,o,u,h]),m)?(0,n.jsx)(n.Fragment,{children:t}):d?(0,n.jsxs)("div",{className:"min-h-screen bg-surface-0",children:[(0,n.jsx)(k,{}),(0,n.jsxs)("div",{className:(0,b.cn)("transition-all duration-300",r?"ml-[68px]":"ml-[240px]"),children:[(0,n.jsx)(F,{}),(0,n.jsx)("main",{className:"p-6",children:t})]})]}):null}},93448:function(e,t,r){"use strict";r.d(t,{$G:function(){return h},Sy:function(){return u},Uc:function(){return c},Uz:function(){return o},cn:function(){return s},dH:function(){return d},pK:function(){return l},td:function(){return i}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function c(e){return e>=95?"healthy":e>=80?"warning":"critical"}function o(e){return e>=95?"text-kpi-pass":e>=80?"text-kpi-warn":"text-kpi-fail"}function l(e){return({critical:"bg-red-500/15 text-red-400 border-red-500/30",high:"bg-orange-500/15 text-orange-400 border-orange-500/30",medium:"bg-amber-500/15 text-amber-400 border-amber-500/30",low:"bg-blue-500/15 text-blue-400 border-blue-500/30",info:"bg-gray-500/15 text-gray-400 border-gray-500/30"})[e]}function i(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])}function d(e){return e<1e3?"".concat(Math.round(e),"ms"):"".concat((e/1e3).toFixed(1),"s")}function u(e){let t="string"==typeof e?new Date(e):e,r=Math.floor((Date.now()-t.getTime())/6e4);if(r<1)return"just now";if(r<60)return"".concat(r,"m ago");let n=Math.floor(r/60);return n<24?"".concat(n,"h ago"):"".concat(Math.floor(n/24),"d ago")}function h(e,t){return e.length<=t?e:e.slice(0,t)+"..."}},79286:function(e,t,r){"use strict";r.d(t,{$j:function(){return o},DF:function(){return d},H0:function(){return u},WH:function(){return h},gN:function(){return i},zP:function(){return l}});var n=r(68680);let a=r(40257).env.WS_URL||"https://vzy-api-gro1.onrender.com",s=null,c={"scan:progress":new Set,"scan:complete":new Set,"scan:error":new Set,"batch:progress":new Set,"batch:complete":new Set};function o(){return(null==s?void 0:s.connected)||((s=(0,n.io)(a,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:10,auth:{token:localStorage.getItem("vzy_token")}})).on("connect",()=>{console.info("[WS] Connected:",null==s?void 0:s.id)}),s.on("disconnect",e=>{console.warn("[WS] Disconnected:",e)}),s.on("scan:progress",e=>{c["scan:progress"].forEach(t=>t(e))}),s.on("scan:complete",e=>{c["scan:complete"].forEach(t=>t(e))}),s.on("scan:error",e=>{c["scan:error"].forEach(t=>t(e))}),s.on("batch:progress",e=>{c["batch:progress"].forEach(t=>t(e))}),s.on("batch:complete",e=>{c["batch:complete"].forEach(t=>t(e))})),s}function l(){null==s||s.disconnect(),s=null}function i(e){return c["scan:complete"].add(e),()=>{c["scan:complete"].delete(e)}}function d(e){return c["scan:error"].add(e),()=>{c["scan:error"].delete(e)}}function u(e){return c["batch:progress"].add(e),()=>{c["batch:progress"].delete(e)}}function h(e){return c["batch:complete"].add(e),()=>{c["batch:complete"].delete(e)}}},2778:function(){},87621:function(e){e.exports={style:{fontFamily:"'__Inter_1270ee', '__Inter_Fallback_1270ee'",fontStyle:"normal"},className:"__className_1270ee",variable:"__variable_1270ee"}},57736:function(e){e.exports={style:{fontFamily:"'__JetBrains_Mono_f3919a', '__JetBrains_Mono_Fallback_f3919a'",fontStyle:"normal"},className:"__className_f3919a",variable:"__variable_f3919a"}}},function(e){e.O(0,[501,809,137,324,184,382,971,117,744],function(){return e(e.s=39665)}),_N_E=e.O()}]);