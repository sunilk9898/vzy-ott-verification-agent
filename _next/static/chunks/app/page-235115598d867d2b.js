(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{41730:function(e,t,s){Promise.resolve().then(s.bind(s,26987))},26987:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(57437),r=s(2265),i=s(76865),l=s(79205);let n=(0,l.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var c=s(3085);let d=(0,l.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var o=s(88906),x=s(91723),m=s(76858),h=s(51817),u=s(7586),p=s(92934),g=s(99388),f=s(27648),j=s(29761),b=s(66681),y=s(93448);function v(e){let{score:t,label:s,weight:r,delta:i,size:l=100}=e,n=(l-8)/2,c=2*Math.PI*n,d=c-t/100*c;return(0,a.jsxs)("div",{className:"card p-4 flex items-center gap-4 animate-fade-up",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",style:{width:l,height:l},children:[(0,a.jsxs)("svg",{viewBox:"0 0 ".concat(l," ").concat(l),className:"transform -rotate-90",children:[(0,a.jsx)("circle",{cx:l/2,cy:l/2,r:n,fill:"none",stroke:"rgba(255,255,255,0.06)",strokeWidth:6}),(0,a.jsx)("circle",{cx:l/2,cy:l/2,r:n,fill:"none",stroke:t>=95?"#22c55e":t>=80?"#f59e0b":"#ef4444",strokeWidth:6,strokeLinecap:"round",strokeDasharray:c,strokeDashoffset:d,className:"gauge-ring"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:(0,y.cn)("text-xl font-bold tabular-nums",(0,y.Uz)(t)),children:t})})]}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-200",children:s}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Weight: ",r]}),void 0!==i&&0!==i&&(0,a.jsxs)("div",{className:(0,y.cn)("text-xs font-medium mt-1",i>0?"text-green-400":"text-red-400"),children:[i>0?"+":"",i.toFixed(1)," from last scan"]})]})]})}var N=s(85675),w=s(67437);let k=(0,l.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);function S(e){let{regressions:t}=e;if(0===t.length)return null;let s=t.filter(e=>"critical"===e.severity||"high"===e.severity).length;return(0,a.jsxs)("div",{className:"rounded-xl border border-red-500/30 bg-red-500/[0.06] p-4 animate-fade-up",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-red-500/15",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-red-400",children:[t.length," Regression",1!==t.length?"s":""," Detected"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:s>0&&"".concat(s," critical/high severity")})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[t.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)("span",{className:(0,y.cn)("badge text-[10px]",(0,y.pK)(e.severity)),children:e.severity.toUpperCase()}),(0,a.jsx)("span",{className:"text-gray-300 flex-1 truncate",children:e.metric}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-red-400 text-xs font-medium tabular-nums",children:[(0,a.jsx)(k,{className:"w-3 h-3"}),Math.abs(e.delta).toFixed(1)]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 tabular-nums",children:[e.previousValue," â†’ ",e.currentValue]})]},t)),t.length>5&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 pl-8",children:["+",t.length-5," more regression(s)"]})]})]})}var C=s(94022),O=s(60864),Z=s(44481),R=s(71837),D=s(92371),I=s(79286);function U(){let{report:e,target:t,loading:s,error:l,findingsBySeverity:h,setTarget:u,startScan:p,refresh:g}=(0,Z.w)(),{trendRange:k,setTrendRange:U}=(0,D.HB)(),{batchScans:F,batchRunning:K,startBatch:W,updateBatchEntry:L,clearBatch:P}=(0,D.eX)(),[z,E]=(0,r.useState)([]),M=async e=>{u(e);try{let t=await (0,R.IK)(e);D.nq.getState().setReport(t)}catch(t){console.warn("Failed to load report for",e,t.message)}},A=async e=>{try{let t=await (0,R.FX)(e);W(t.batchId,t.scans.map(e=>({url:e.url,scanId:e.scanId})))}catch(e){alert("Batch scan failed: ".concat(e.message))}};(0,r.useEffect)(()=>{let e=(0,I.H0)(e=>{L(e.scanId,{status:e.status,score:e.score,error:e.error}),"completed"===e.status&&e.url&&!t&&M(e.url)}),s=(0,I.WH)(()=>{D.eX.setState({batchRunning:!1});let e=D.eX.getState().batchScans.find(e=>"completed"===e.status);e&&!D.nq.getState().target&&M(e.url)});return()=>{e(),s()}},[L,t]),(0,r.useEffect)(()=>{t&&(0,R.Aj)(t,k).then(E).catch(()=>{})},[t,k]);let T=null==e?void 0:e.kpiScore;if(!t)return(0,a.jsxs)("div",{className:"max-w-xl mx-auto mt-20 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gradient",children:"VZY OTT Verification Agent"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Enter a website URL or source code path to start analyzing security, performance, and code quality."})]}),(0,a.jsx)(O.l,{onSubmit:e=>{u(e.url||e.repoPath||""),p(e)},onBatchSubmit:A,loading:s||K}),F.length>0&&(0,a.jsx)(B,{batchScans:F,batchRunning:K,clearBatch:P,onSelectUrl:M,activeUrl:t})]});if(s&&!e)return(0,a.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-brand-500/30 border-t-brand-500 rounded-full animate-spin mx-auto"}),(0,a.jsx)("div",{className:"text-gray-400",children:"Loading scan report..."})]})});if(l&&!e)return(0,a.jsxs)("div",{className:"max-w-xl mx-auto mt-20 space-y-6",children:[(0,a.jsxs)("div",{className:"card p-6 text-center space-y-3",children:[(0,a.jsx)(i.Z,{className:"w-10 h-10 text-amber-400 mx-auto"}),(0,a.jsx)("div",{className:"text-red-400 text-sm",children:l}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"No scan data found. Run a scan to get started."})]}),(0,a.jsx)(O.l,{onSubmit:e=>p(e),onBatchSubmit:A,loading:s||K}),F.length>0&&(0,a.jsx)(B,{batchScans:F,batchRunning:K,clearBatch:P,onSelectUrl:M,activeUrl:t})]});if(!e||!T)return null;let q="improving"===T.trend.direction?n:"declining"===T.trend.direction?c.Z:d;return(0,a.jsxs)("div",{className:"space-y-6 max-w-[1440px] mx-auto",children:[(0,a.jsx)(S,{regressions:T.regressions}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,a.jsxs)("div",{className:"card p-8 flex flex-col items-center justify-center h-full",children:[(0,a.jsx)(j.O,{score:T.overallScore,label:"Overall KPI",size:"xl"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 text-sm",children:[(0,a.jsx)(q,{className:(0,y.cn)("w-4 h-4","improving"===T.trend.direction?"text-green-400":"declining"===T.trend.direction?"text-red-400":"text-gray-500")}),(0,a.jsxs)("span",{className:(0,y.cn)("font-medium","improving"===T.trend.direction?"text-green-400":"declining"===T.trend.direction?"text-red-400":"text-gray-500"),children:[T.trend.delta>0?"+":"",T.trend.delta.toFixed(1)]}),(0,a.jsx)("span",{className:"text-gray-500",children:"vs last scan"})]})]})}),(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(f.default,{href:"/security",className:"block",children:(0,a.jsx)(v,{score:T.grades.security.rawScore,label:"Security",weight:"40%"})}),(0,a.jsx)(f.default,{href:"/performance",className:"block",children:(0,a.jsx)(v,{score:T.grades.performance.rawScore,label:"Performance",weight:"35%"})}),(0,a.jsx)(f.default,{href:"/code-quality",className:"block",children:(0,a.jsx)(v,{score:T.grades.codeQuality.rawScore,label:"Code Quality",weight:"25%"})}),(0,a.jsx)(w.i,{label:"Critical Issues",value:h.critical||0,icon:i.Z,status:h.critical?"bad":"good"}),(0,a.jsx)(w.i,{label:"High Issues",value:h.high||0,icon:o.Z,status:h.high?"warn":"good"}),(0,a.jsx)(w.i,{label:"Last Scan",value:(0,y.Sy)(e.generatedAt),subtitle:"both"===e.platform?"Desktop + mWeb":e.platform,icon:x.Z,status:"neutral"})]})]}),(0,a.jsxs)("div",{className:"card p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"KPI Score Trend"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Overall score over time (target: 95)"})]}),(0,a.jsx)("div",{className:"flex gap-1",children:[7,30,90].map(e=>(0,a.jsxs)("button",{onClick:()=>U(e),className:(0,y.cn)("btn text-xs py-1 px-3",k===e?"bg-brand-600/20 text-brand-400 border border-brand-500/30":"btn-ghost"),children:[e,"d"]},e))})]}),(0,a.jsx)(b.n,{data:z.length>0?z:T.trend.history,showBreakdown:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/[0.06]",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-200",children:["Critical & High Findings (",e.criticalFindings.length,")"]}),(0,a.jsxs)(f.default,{href:"/security",className:"text-xs text-brand-400 hover:text-brand-300 flex items-center gap-1",children:["View all ",(0,a.jsx)(m.Z,{className:"w-3 h-3"})]})]}),(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:0===e.criticalFindings.length?(0,a.jsx)("div",{className:"p-8 text-center text-sm text-gray-500",children:"No critical or high findings. Great job!"}):e.criticalFindings.slice(0,10).map(e=>(0,a.jsx)(C.R,{finding:e},e.id))})]})}),(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-4",children:[(0,a.jsxs)("div",{className:"card p-5",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Severity Distribution"}),(0,a.jsx)(N.O,{data:h})]}),(0,a.jsxs)("div",{className:"card p-5 mt-6",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Executive Summary"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 leading-relaxed",children:e.executiveSummary})]})]})]}),e.recommendations.length>0&&(0,a.jsxs)("div",{className:"card p-5",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-200 mb-4",children:"Top Recommendations"}),(0,a.jsx)("div",{className:"space-y-3",children:e.recommendations.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-4 p-3 rounded-lg bg-surface-1",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-brand-600/20 text-brand-400 flex items-center justify-center text-xs font-bold",children:e.priority}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-200",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,a.jsxs)("span",{className:"text-[10px] text-gray-500 uppercase",children:["Impact: ",e.impact]}),(0,a.jsxs)("span",{className:(0,y.cn)("badge text-[10px]","low"===e.effort?"bg-green-500/15 text-green-400 border-green-500/30":"medium"===e.effort?"bg-amber-500/15 text-amber-400 border-amber-500/30":"bg-red-500/15 text-red-400 border-red-500/30"),children:["Effort: ",e.effort]})]})]})]},e.priority))})]}),F.length>0&&(0,a.jsx)(B,{batchScans:F,batchRunning:K,clearBatch:P,onSelectUrl:M,activeUrl:t})]})}function B(e){let{batchScans:t,batchRunning:s,clearBatch:r,onSelectUrl:i,activeUrl:l}=e,n=t.filter(e=>"completed"===e.status).length,c=t.filter(e=>"error"===e.status).length,d=t.length;return(0,a.jsxs)("div",{className:"card mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/[0.06]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s?(0,a.jsx)(h.Z,{className:"w-4 h-4 text-brand-400 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-4 h-4 text-brand-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-200",children:["Batch Scan ",s?"in Progress":"Complete"]}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:[n,"/",d," completed",c>0&&" \xb7 ".concat(c," failed")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-32 h-1.5 bg-surface-4 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-brand-500 rounded-full transition-all duration-500",style:{width:"".concat(d>0?(n+c)/d*100:0,"%")}})}),!s&&(0,a.jsx)("button",{onClick:r,className:"text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"Clear"})]})]}),(0,a.jsx)("div",{className:"divide-y divide-white/[0.04] max-h-[400px] overflow-y-auto",children:t.map((e,t)=>{let s="completed"===e.status&&i,r=l===e.url;return(0,a.jsxs)("div",{onClick:()=>s&&i(e.url),className:(0,y.cn)("px-5 py-3 flex items-center justify-between transition-colors",s&&"cursor-pointer hover:bg-white/[0.04]",r&&"bg-brand-600/10 border-l-2 border-brand-500"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsxs)("span",{className:"text-[10px] text-gray-600 w-5 text-right shrink-0",children:[t+1,"."]}),"completed"===e.status?(0,a.jsx)(p.Z,{className:"w-4 h-4 text-green-400 shrink-0"}):"running"===e.status?(0,a.jsx)(h.Z,{className:"w-4 h-4 text-brand-400 animate-spin shrink-0"}):"error"===e.status?(0,a.jsx)(g.Z,{className:"w-4 h-4 text-red-400 shrink-0"}):(0,a.jsx)(x.Z,{className:"w-4 h-4 text-gray-500 shrink-0"}),(0,a.jsx)("span",{className:"text-xs text-gray-300 truncate",children:e.url}),r&&(0,a.jsx)("span",{className:"text-[9px] text-brand-400 font-medium ml-1",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 shrink-0 ml-3",children:[void 0!==e.score&&(0,a.jsx)("span",{className:(0,y.cn)("text-sm font-bold",e.score>=95?"text-green-400":e.score>=70?"text-amber-400":"text-red-400"),children:e.score}),(0,a.jsx)("span",{className:(0,y.cn)("text-[10px] px-2 py-0.5 rounded-full font-medium","completed"===e.status?"bg-green-500/15 text-green-400":"running"===e.status?"bg-brand-500/15 text-brand-400":"error"===e.status?"bg-red-500/15 text-red-400":"bg-white/[0.06] text-gray-500"),children:"completed"===e.status?"Done":"running"===e.status?"Scanning":"error"===e.status?"Failed":"Queued"}),s&&(0,a.jsx)(m.Z,{className:"w-3 h-3 text-gray-500"})]})]},e.scanId)})}),!s&&t.some(e=>"completed"===e.status)&&(0,a.jsx)("div",{className:"px-5 py-2 border-t border-white/[0.06]",children:(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"Click a completed scan to view its detailed report across all pages"})})]})}},85675:function(e,t,s){"use strict";s.d(t,{O:function(){return x}});var a=s(57437),r=s(47625),i=s(75169),l=s(3574),n=s(20407),c=s(8147),d=s(22190);let o={critical:"#ef4444",high:"#f97316",medium:"#f59e0b",low:"#3b82f6",info:"#6b7280"};function x(e){let{data:t,height:s=240}=e,x=Object.entries(t).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t,s]=e;return{name:t.charAt(0).toUpperCase()+t.slice(1),value:s,color:o[t]||"#6b7280"}});return 0===x.length?(0,a.jsx)("div",{className:"flex items-center justify-center text-gray-500 text-sm",style:{height:s},children:"No findings"}):(0,a.jsx)(r.h,{width:"100%",height:s,children:(0,a.jsxs)(i.u,{children:[(0,a.jsx)(l.b,{data:x,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:3,dataKey:"value",stroke:"none",children:x.map((e,t)=>(0,a.jsx)(n.b,{fill:e.color},t))}),(0,a.jsx)(c.u,{contentStyle:{backgroundColor:"#1a1a24",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",fontSize:"12px"}}),(0,a.jsx)(d.D,{formatter:e=>(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e})})]})})}},66681:function(e,t,s){"use strict";s.d(t,{n:function(){return u}});var a=s(57437),r=s(47625),i=s(5481),l=s(56940),n=s(97059),c=s(62994),d=s(84962),o=s(8147),x=s(23263),m=s(5469),h=s(60936);function u(e){let{data:t,height:s=280,showBreakdown:u=!1,target:p=95}=e,g=t.map(e=>({...e,dateLabel:(()=>{try{return(0,m.WU)((0,h.D)(e.date),"MMM d")}catch(t){return e.date}})()}));return(0,a.jsx)(r.h,{width:"100%",height:s,children:(0,a.jsxs)(i.T,{data:g,margin:{top:8,right:8,left:-20,bottom:0},children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"gradOverall",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"gradSecurity",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"gradPerf",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"gradCode",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#a855f7",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:0})]})]}),(0,a.jsx)(l.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.04)"}),(0,a.jsx)(n.K,{dataKey:"dateLabel",tick:{fill:"#6b7280",fontSize:11},axisLine:{stroke:"rgba(255,255,255,0.06)"},tickLine:!1}),(0,a.jsx)(c.B,{domain:[0,100],tick:{fill:"#6b7280",fontSize:11},axisLine:!1,tickLine:!1}),(0,a.jsx)(d.d,{y:p,stroke:"#22c55e",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"Target ".concat(p),position:"right",fill:"#22c55e",fontSize:10}}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"#1a1a24",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#9ca3af"},itemStyle:{color:"#e5e7eb"}}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.u,{type:"monotone",dataKey:"security",stroke:"#ef4444",fill:"url(#gradSecurity)",strokeWidth:1.5,dot:!1,name:"Security"}),(0,a.jsx)(x.u,{type:"monotone",dataKey:"performance",stroke:"#22c55e",fill:"url(#gradPerf)",strokeWidth:1.5,dot:!1,name:"Performance"}),(0,a.jsx)(x.u,{type:"monotone",dataKey:"codeQuality",stroke:"#a855f7",fill:"url(#gradCode)",strokeWidth:1.5,dot:!1,name:"Code Quality"})]}),(0,a.jsx)(x.u,{type:"monotone",dataKey:"score",stroke:"#3b82f6",fill:"url(#gradOverall)",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#3b82f6",stroke:"#1a1a24",strokeWidth:2},name:"Overall"})]})})}}},function(e){e.O(0,[809,137,324,96,642,935,184,334,382,571,458,971,117,744],function(){return e(e.s=41730)}),_N_E=e.O()}]);