(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{11457:function(e,t,s){Promise.resolve().then(s.bind(s,31811))},30401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},49322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},25330:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},82431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},88906:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},31811:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(57437),n=s(2265),r=s(79205);let l=(0,r.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=s(88906),i=s(25330);let d=(0,r.Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),o=(0,r.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=s(32489),u=s(49322);let m=(0,r.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),h=(0,r.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=s(51817);let y=(0,r.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var g=s(30401),b=s(95805),f=s(82431),j=s(18930),v=s(92371),N=s(71837),w=s(93448);let k={admin:{label:"Admin",color:"bg-red-500/15 text-red-400 border-red-500/30",icon:l},devops:{label:"DevOps",color:"bg-amber-500/15 text-amber-400 border-amber-500/30",icon:c.Z},developer:{label:"Developer",color:"bg-blue-500/15 text-blue-400 border-blue-500/30",icon:i.Z},executive:{label:"Executive",color:"bg-purple-500/15 text-purple-400 border-purple-500/30",icon:d}};function S(e){let{role:t}=e,s=k[t]||k.developer,n=s.icon;return(0,a.jsxs)("span",{className:(0,w.cn)("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border",s.color),children:[(0,a.jsx)(n,{className:"w-3 h-3"}),s.label]})}function C(e){let{open:t,onClose:s,onCreated:r}=e,[l,c]=(0,n.useState)({email:"",name:"",password:"",role:"developer"}),[i,d]=(0,n.useState)(!1),[y,g]=(0,n.useState)(""),[b,f]=(0,n.useState)(!1),j=async e=>{e.preventDefault(),d(!0),g("");try{let e=await (0,N.r4)(l);r(e),c({email:"",name:"",password:"",role:"developer"}),s()}catch(e){g(e.message||"Failed to create user")}d(!1)};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"card p-6 w-full max-w-md mx-4 animate-in fade-in zoom-in-95",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-5 h-5 text-brand-400"}),"Create New User"]}),(0,a.jsx)("button",{onClick:s,className:"btn-ghost p-1.5 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20 mb-4",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs text-red-400",children:y})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Full Name"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"John Doe",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Email"}),(0,a.jsx)("input",{type:"email",className:"input",placeholder:"user@dishtv.in",value:l.email,onChange:e=>c({...l,email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:b?"text":"password",className:"input pr-10",placeholder:"Minimum 6 characters",value:l.password,onChange:e=>c({...l,password:e.target.value}),required:!0,minLength:6}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:b?(0,a.jsx)(m,{className:"w-4 h-4"}):(0,a.jsx)(h,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Role"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["admin","devops","developer","executive"].map(e=>{let t=k[e],s=t.icon;return(0,a.jsxs)("button",{type:"button",onClick:()=>c({...l,role:e}),className:(0,w.cn)("flex items-center gap-2 px-3 py-2.5 rounded-lg border text-sm font-medium transition-all",l.role===e?"border-brand-500 bg-brand-500/10 text-brand-400":"border-white/[0.06] text-gray-400 hover:border-white/10 hover:bg-white/[0.02]"),children:[(0,a.jsx)(s,{className:"w-4 h-4"}),t.label]},e)})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"btn-ghost flex-1 py-2.5",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"btn-primary flex-1 py-2.5",children:[i?(0,a.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(o,{className:"w-4 h-4"}),i?"Creating...":"Create User"]})]})]})]})}):null}function Z(e){let{user:t,onClose:s,onUpdated:r}=e,[l,c]=(0,n.useState)({name:t.name,role:t.role,password:""}),[i,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(""),h=async e=>{e.preventDefault(),d(!0),m("");try{let e={name:l.name,role:l.role};l.password&&(e.password=l.password);let a=await (0,N.Nq)(t.id,e);r(a),s()}catch(e){m(e.message||"Failed to update user")}d(!1)};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"card p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(y,{className:"w-5 h-5 text-brand-400"}),"Edit User"]}),(0,a.jsx)("button",{onClick:s,className:"btn-ghost p-1.5 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]}),o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20 mb-4",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs text-red-400",children:o})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Email (read-only)"}),(0,a.jsx)("input",{type:"email",className:"input opacity-50",value:t.email,disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Full Name"}),(0,a.jsx)("input",{type:"text",className:"input",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"New Password (leave empty to keep current)"}),(0,a.jsx)("input",{type:"password",className:"input",placeholder:"••••••••",value:l.password,onChange:e=>c({...l,password:e.target.value}),minLength:6})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Role"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["admin","devops","developer","executive"].map(e=>{let t=k[e],s=t.icon;return(0,a.jsxs)("button",{type:"button",onClick:()=>c({...l,role:e}),className:(0,w.cn)("flex items-center gap-2 px-3 py-2.5 rounded-lg border text-sm font-medium transition-all",l.role===e?"border-brand-500 bg-brand-500/10 text-brand-400":"border-white/[0.06] text-gray-400 hover:border-white/10 hover:bg-white/[0.02]"),children:[(0,a.jsx)(s,{className:"w-4 h-4"}),t.label]},e)})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"btn-ghost flex-1 py-2.5",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"btn-primary flex-1 py-2.5",children:[i?(0,a.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(g.Z,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]})]})]})]})})}function M(){let{user:e,hasRole:t}=(0,v.tN)(),[s,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[d,x]=(0,n.useState)(""),[m,h]=(0,n.useState)(!1),[g,M]=(0,n.useState)(null),[O,z]=(0,n.useState)(null),U=t(["admin"]),A=(0,n.useCallback)(async()=>{i(!0),x("");try{let e=await (0,N.Rf)();r(e)}catch(e){x(e.message||"Failed to load users")}i(!1)},[]);(0,n.useEffect)(()=>{U&&A()},[U,A]);let E=async e=>{try{let t=await (0,N.Nq)(e.id,{is_active:!e.is_active});r(s=>s.map(s=>s.id===e.id?t:s))}catch(e){x(e.message)}},_=async e=>{if(confirm("Are you sure you want to permanently delete this user?")){z(e);try{await (0,N.h8)(e),r(t=>t.filter(t=>t.id!==e))}catch(e){x(e.message)}z(null)}};if(!U)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-400",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Only Admins can manage users."})]});let R=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return(0,a.jsxs)("div",{className:"space-y-6 max-w-6xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,a.jsx)(b.Z,{className:"w-7 h-7 text-brand-400"}),"User Management"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage user accounts and RBAC roles for dashboard access"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:A,className:"btn-ghost px-3 py-2 text-sm",children:(0,a.jsx)(f.Z,{className:(0,w.cn)("w-4 h-4",l&&"animate-spin")})}),(0,a.jsxs)("button",{onClick:()=>h(!0),className:"btn-primary px-4 py-2 text-sm",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),"Add User"]})]})]}),(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Role Permissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(S,{role:"admin"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-relaxed",children:"Full access + user management"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(S,{role:"devops"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-relaxed",children:"Full access + scan control"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(S,{role:"developer"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-relaxed",children:"View all dashboards + reports"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(S,{role:"executive"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-relaxed",children:"View only (overview + reports)"})]})]})]}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-sm text-red-400",children:d})]}),(0,a.jsx)("div",{className:"card overflow-hidden",children:l?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 animate-spin text-brand-400"})}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(b.Z,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No users found"})]}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-white/[0.06]",children:[(0,a.jsx)("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"User"}),(0,a.jsx)("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"Role"}),(0,a.jsx)("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"Status"}),(0,a.jsx)("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"Last Login"}),(0,a.jsx)("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"Created"}),(0,a.jsx)("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider px-5 py-3",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/[0.04]",children:s.map(t=>(0,a.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-brand-600 to-cyan-600 flex items-center justify-center text-white text-sm font-bold",children:t.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-white",children:[t.name,t.id===(null==e?void 0:e.id)&&(0,a.jsx)("span",{className:"ml-2 text-[10px] text-brand-400 bg-brand-500/10 px-1.5 py-0.5 rounded",children:"YOU"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:t.email})]})]})}),(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsx)(S,{role:t.role})}),(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsxs)("button",{onClick:()=>E(t),disabled:t.id===(null==e?void 0:e.id),className:(0,w.cn)("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border transition-all",t.is_active?"bg-emerald-500/15 text-emerald-400 border-emerald-500/30 hover:bg-emerald-500/25":"bg-gray-500/15 text-gray-400 border-gray-500/30 hover:bg-gray-500/25",t.id===(null==e?void 0:e.id)&&"opacity-50 cursor-not-allowed"),children:[(0,a.jsx)("span",{className:(0,w.cn)("w-1.5 h-1.5 rounded-full",t.is_active?"bg-emerald-400":"bg-gray-500")}),t.is_active?"Active":"Inactive"]})}),(0,a.jsx)("td",{className:"px-5 py-4 text-xs text-gray-500",children:R(t.last_login)}),(0,a.jsx)("td",{className:"px-5 py-4 text-xs text-gray-500",children:R(t.created_at)}),(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)("button",{onClick:()=>M(t),className:"btn-ghost p-2 rounded-lg text-gray-400 hover:text-brand-400",title:"Edit user",children:(0,a.jsx)(y,{className:"w-3.5 h-3.5"})}),t.id!==(null==e?void 0:e.id)&&(0,a.jsx)("button",{onClick:()=>_(t.id),disabled:O===t.id,className:"btn-ghost p-2 rounded-lg text-gray-400 hover:text-red-400",title:"Delete user",children:O===t.id?(0,a.jsx)(p.Z,{className:"w-3.5 h-3.5 animate-spin"}):(0,a.jsx)(j.Z,{className:"w-3.5 h-3.5"})})]})})]},t.id))})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(k).map(e=>{let[t,n]=e,r=s.filter(e=>e.role===t).length,l=n.icon;return(0,a.jsxs)("div",{className:"card p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,w.cn)("w-10 h-10 rounded-lg flex items-center justify-center",n.color.split(" ")[0]),children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:r}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[n.label,"s"]})]})]},t)})}),(0,a.jsx)(C,{open:m,onClose:()=>h(!1),onCreated:e=>r(t=>[...t,e])}),g&&(0,a.jsx)(Z,{user:g,onClose:()=>M(null),onUpdated:e=>{r(t=>t.map(t=>t.id===e.id?e:t))}})]})}},71837:function(e,t,s){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("vzy_token"),a=await fetch("".concat("https://vzy-api-gro1.onrender.com/api").concat(e),{...t,headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers}});if(!a.ok){let e=await a.json().catch(()=>({error:a.statusText}));throw new n(a.status,e.error||a.statusText)}return a.json()}s.d(t,{Aj:function(){return l},FX:function(){return i},IK:function(){return r},Nq:function(){return y},Qx:function(){return b},Rf:function(){return h},bx:function(){return d},h8:function(){return g},hO:function(){return u},iE:function(){return o},lZ:function(){return c},r4:function(){return p},rF:function(){return x},te:function(){return f},x4:function(){return m}});class n extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}async function r(e){return a("/reports/latest?target=".concat(encodeURIComponent(e)))}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return a("/trends?target=".concat(encodeURIComponent(e),"&days=").concat(t))}async function c(e){return a("/scans",{method:"POST",body:JSON.stringify(e)})}async function i(e){return a("/scans/batch",{method:"POST",body:JSON.stringify(e)})}async function d(e){return a("/scans/".concat(e,"/abort"),{method:"POST"})}async function o(){return a("/config")}async function x(e){return a("/config",{method:"PATCH",body:JSON.stringify(e)})}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return a("/webhooks/logs?limit=".concat(e))}async function m(e,t){return a("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async function h(){return a("/auth/users")}async function p(e){return a("/auth/users",{method:"POST",body:JSON.stringify(e)})}async function y(e,t){return a("/auth/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async function g(e){return a("/auth/users/".concat(e),{method:"DELETE"})}async function b(){return a("/health")}async function f(e){return a("/jira/create",{method:"POST",body:JSON.stringify({findingId:e})})}},92371:function(e,t,s){"use strict";s.d(t,{HB:function(){return d},eX:function(){return i},nq:function(){return l},rG:function(){return c},tN:function(){return r}});var a=s(59625),n=s(89134);let r=(0,a.Ue)()((0,n.tJ)((e,t)=>({user:null,token:null,setAuth:(t,s)=>{e({user:t,token:s}),localStorage.setItem("vzy_token",s),document.cookie="vzy_token=".concat(s,"; path=/; max-age=").concat(86400,"; SameSite=Lax")},logout:()=>{e({user:null,token:null}),localStorage.removeItem("vzy_token"),document.cookie="vzy_token=; path=/; max-age=0"},hasRole:e=>{let s=t().user;return!!s&&e.includes(s.role)}}),{name:"vzy-auth"})),l=(0,a.Ue)(e=>({report:null,target:"",loading:!1,error:null,setReport:t=>e({report:t,error:null}),setTarget:t=>e({target:t}),setLoading:t=>e({loading:t}),setError:t=>e({error:t,loading:!1})})),c=(0,a.Ue)((e,t)=>({activeScan:null,scanHistory:[],setActiveScan:t=>e({activeScan:t}),updateAgentProgress:(s,a,n,r)=>{let l=t().activeScan;l&&l.scanId===s&&e({activeScan:{...l,agents:{...l.agents,[a]:{progress:n,status:r}}}})},completeScan:(t,s,a)=>{e(e=>({activeScan:null,scanHistory:[{scanId:t,score:s,status:a,timestamp:new Date().toISOString()},...e.scanHistory.slice(0,49)]}))}})),i=(0,a.Ue)(e=>({batchId:null,batchScans:[],batchRunning:!1,startBatch:(t,s)=>e({batchId:t,batchScans:s.map(e=>({...e,status:"queued"})),batchRunning:!0}),updateBatchEntry:(t,s)=>e(e=>({batchScans:e.batchScans.map(e=>e.scanId===t?{...e,...s}:e)})),clearBatch:()=>e({batchId:null,batchScans:[],batchRunning:!1})})),d=(0,a.Ue)()((0,n.tJ)(e=>({sidebarCollapsed:!1,trendRange:30,toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setTrendRange:t=>e({trendRange:t})}),{name:"vzy-ui"}))},93448:function(e,t,s){"use strict";s.d(t,{$G:function(){return u},Sy:function(){return x},Uc:function(){return l},Uz:function(){return c},cn:function(){return r},dH:function(){return o},pK:function(){return i},td:function(){return d}});var a=s(61994),n=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}function l(e){return e>=95?"healthy":e>=80?"warning":"critical"}function c(e){return e>=95?"text-kpi-pass":e>=80?"text-kpi-warn":"text-kpi-fail"}function i(e){return({critical:"bg-red-500/15 text-red-400 border-red-500/30",high:"bg-orange-500/15 text-orange-400 border-orange-500/30",medium:"bg-amber-500/15 text-amber-400 border-amber-500/30",low:"bg-blue-500/15 text-blue-400 border-blue-500/30",info:"bg-gray-500/15 text-gray-400 border-gray-500/30"})[e]}function d(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])}function o(e){return e<1e3?"".concat(Math.round(e),"ms"):"".concat((e/1e3).toFixed(1),"s")}function x(e){let t="string"==typeof e?new Date(e):e,s=Math.floor((Date.now()-t.getTime())/6e4);if(s<1)return"just now";if(s<60)return"".concat(s,"m ago");let a=Math.floor(s/60);return a<24?"".concat(a,"h ago"):"".concat(Math.floor(a/24),"d ago")}function u(e,t){return e.length<=t?e:e.slice(0,t)+"..."}}},function(e){e.O(0,[809,137,971,117,744],function(){return e(e.s=11457)}),_N_E=e.O()}]);