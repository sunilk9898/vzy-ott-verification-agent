(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{3434:function(e,a,t){Promise.resolve().then(t.bind(t,85572))},85572:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return h}});var s=t(57437),r=t(29),n=t.n(r),d=t(2265),c=t(48736),o=t(17342),i=t(30401),l=t(68919),x=t(3085),b=t(76858),m=t(66681),u=t(44481),j=t(93448);function h(){let{report:e}=(0,u.w)(),[a,t]=(0,d.useState)(!1);if(!e)return(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsxs)("div",{className:"text-center text-gray-500 space-y-2",children:[(0,s.jsx)(c.Z,{className:"w-12 h-12 mx-auto opacity-30"}),(0,s.jsx)("p",{className:"text-sm",children:"No report data. Run a scan to generate reports."})]})});let r=e.kpiScore,h=e.comparisonWithPrevious,g=async()=>{let a="".concat(window.location.origin,"/reports/").concat(e.scanId);await navigator.clipboard.writeText(a),t(!0),setTimeout(()=>t(!1),2e3)};return(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba space-y-6 max-w-[1200px] mx-auto",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("h1",{className:"jsx-a0d02de2b498a3ba text-xl font-bold text-gray-100",children:"Reporting"}),(0,s.jsx)("p",{className:"jsx-a0d02de2b498a3ba text-sm text-gray-500",children:"Download, compare, and share scan reports"})]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="vzy-scan-".concat(e.scanId,".json"),s.click(),URL.revokeObjectURL(t)},className:"jsx-a0d02de2b498a3ba btn-secondary text-xs",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"})," Download JSON"]}),(0,s.jsxs)("button",{onClick:()=>{window.print()},className:"jsx-a0d02de2b498a3ba btn-secondary text-xs",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"})," Download PDF"]}),(0,s.jsxs)("button",{onClick:g,className:"jsx-a0d02de2b498a3ba btn-primary text-xs",children:[a?(0,s.jsx)(i.Z,{className:"w-4 h-4"}):(0,s.jsx)(l.Z,{className:"w-4 h-4"}),a?"Copied!":"Share Link"]})]})]}),(0,s.jsxs)("div",{id:"report-content",className:"jsx-a0d02de2b498a3ba card p-6 print:shadow-none",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba flex items-start justify-between mb-6",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("h2",{className:"jsx-a0d02de2b498a3ba text-lg font-bold text-gray-100",children:"Scan Report"}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500 mt-1 space-y-0.5",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:["Scan ID: ",e.scanId]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:["Generated: ",new Date(e.generatedAt).toLocaleString()]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:["Target: ",e.target.url||e.target.repoPath]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:["Platform: ",e.platform]})]})]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba text-right",children:[(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("text-4xl font-bold tabular-nums",(0,j.Uz)(r.overallScore))||""),children:r.overallScore}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500",children:"/ 100 Overall KPI"}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("badge mt-2",r.passesThreshold?"bg-green-500/15 text-green-400 border-green-500/30":"bg-red-500/15 text-red-400 border-red-500/30")||""),children:r.passesThreshold?"PASS":"FAIL"})]})]}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba grid grid-cols-3 gap-4 mb-6",children:[{label:"Security",score:r.grades.security.rawScore,weight:"40%"},{label:"Performance",score:r.grades.performance.rawScore,weight:"35%"},{label:"Code Quality",score:r.grades.codeQuality.rawScore,weight:"25%"}].map(e=>(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba p-4 rounded-lg bg-surface-1 text-center",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500",children:[e.label," (",e.weight,")"]}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("text-2xl font-bold mt-1",(0,j.Uz)(e.score))||""),children:e.score})]},e.label))}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba mb-6",children:[(0,s.jsx)("h3",{className:"jsx-a0d02de2b498a3ba text-sm font-semibold text-gray-200 mb-2",children:"Executive Summary"}),(0,s.jsx)("p",{className:"jsx-a0d02de2b498a3ba text-sm text-gray-400 leading-relaxed",children:e.executiveSummary})]}),e.criticalFindings.length>0&&(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba mb-6",children:[(0,s.jsxs)("h3",{className:"jsx-a0d02de2b498a3ba text-sm font-semibold text-gray-200 mb-3",children:["Critical & High Findings (",e.criticalFindings.length,")"]}),(0,s.jsxs)("table",{className:"jsx-a0d02de2b498a3ba data-table",children:[(0,s.jsx)("thead",{className:"jsx-a0d02de2b498a3ba",children:(0,s.jsxs)("tr",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("th",{className:"jsx-a0d02de2b498a3ba",children:"Severity"}),(0,s.jsx)("th",{className:"jsx-a0d02de2b498a3ba",children:"Finding"}),(0,s.jsx)("th",{className:"jsx-a0d02de2b498a3ba",children:"Category"}),(0,s.jsx)("th",{className:"jsx-a0d02de2b498a3ba",children:"Agent"})]})}),(0,s.jsx)("tbody",{className:"jsx-a0d02de2b498a3ba",children:e.criticalFindings.slice(0,20).map(e=>(0,s.jsxs)("tr",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("td",{className:"jsx-a0d02de2b498a3ba",children:(0,s.jsx)("span",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("badge text-[10px]",(0,j.pK)(e.severity))||""),children:e.severity.toUpperCase()})}),(0,s.jsx)("td",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-200 max-w-[300px] truncate",children:e.title}),(0,s.jsx)("td",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-400",children:e.category}),(0,s.jsx)("td",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500 capitalize",children:e.agent})]},e.id))})]})]}),e.recommendations.length>0&&(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba mb-6",children:[(0,s.jsx)("h3",{className:"jsx-a0d02de2b498a3ba text-sm font-semibold text-gray-200 mb-3",children:"Recommendations"}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba space-y-2",children:e.recommendations.map(e=>(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba flex items-start gap-3 p-3 rounded-lg bg-surface-1",children:[(0,s.jsxs)("span",{className:"jsx-a0d02de2b498a3ba text-xs font-bold text-brand-400 mt-0.5",children:["#",e.priority]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-sm text-gray-200",children:e.title}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-400",children:e.description})]}),(0,s.jsxs)("span",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("badge text-[10px] ml-auto flex-shrink-0","low"===e.effort?"bg-green-500/15 text-green-400 border-green-500/30":"medium"===e.effort?"bg-amber-500/15 text-amber-400 border-amber-500/30":"bg-red-500/15 text-red-400 border-red-500/30")||""),children:[e.effort," effort"]})]},e.priority))})]})]}),h&&(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba card p-6",children:[(0,s.jsx)("h3",{className:"jsx-a0d02de2b498a3ba text-sm font-semibold text-gray-200 mb-4",children:"Regression Comparison"}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba grid grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba p-4 rounded-lg bg-surface-1 text-center",children:[(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500",children:"Score Delta"}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba "+((0,j.cn)("text-2xl font-bold mt-1",h.scoreDelta>0?"text-green-400":h.scoreDelta<0?"text-red-400":"text-gray-400")||""),children:[h.scoreDelta>0?"+":"",h.scoreDelta.toFixed(1)]})]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba p-4 rounded-lg bg-surface-1 text-center",children:[(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500",children:"New Findings"}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-2xl font-bold text-amber-400 mt-1",children:h.newFindings.length})]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba p-4 rounded-lg bg-surface-1 text-center",children:[(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500",children:"Resolved"}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba text-2xl font-bold text-green-400 mt-1",children:h.resolvedFindings.length})]})]}),h.regressions.length>0&&(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba",children:[(0,s.jsx)("h4",{className:"jsx-a0d02de2b498a3ba text-xs font-medium text-gray-400 mb-2",children:"Regressions"}),(0,s.jsx)("div",{className:"jsx-a0d02de2b498a3ba space-y-2",children:h.regressions.map((e,a)=>(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba flex items-center gap-3 p-2 rounded bg-red-500/[0.04]",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),(0,s.jsx)("span",{className:"jsx-a0d02de2b498a3ba text-sm text-gray-300 flex-1",children:e.metric}),(0,s.jsxs)("span",{className:"jsx-a0d02de2b498a3ba text-xs text-gray-500 tabular-nums",children:[e.previousValue," ",(0,s.jsx)(b.Z,{className:"w-3 h-3 inline"})," ",e.currentValue]})]},a))})]})]}),(0,s.jsxs)("div",{className:"jsx-a0d02de2b498a3ba card p-5",children:[(0,s.jsx)("h3",{className:"jsx-a0d02de2b498a3ba text-sm font-semibold text-gray-200 mb-4",children:"Weekly Summary"}),(0,s.jsx)(m.n,{data:r.trend.history,height:240,showBreakdown:!0})]}),(0,s.jsx)(n(),{id:"a0d02de2b498a3ba",children:"@media print{body{background:white!important;color:black!important}.card{border:1px solid#ddd!important;background:white!important}nav,header,aside,button{display:none!important}main{margin:0!important;padding:20px!important}}"})]})}},66681:function(e,a,t){"use strict";t.d(a,{n:function(){return u}});var s=t(57437),r=t(47625),n=t(5481),d=t(56940),c=t(97059),o=t(62994),i=t(84962),l=t(8147),x=t(23263),b=t(5469),m=t(60936);function u(e){let{data:a,height:t=280,showBreakdown:u=!1,target:j=95}=e,h=a.map(e=>({...e,dateLabel:(()=>{try{return(0,b.WU)((0,m.D)(e.date),"MMM d")}catch(a){return e.date}})()}));return(0,s.jsx)(r.h,{width:"100%",height:t,children:(0,s.jsxs)(n.T,{data:h,margin:{top:8,right:8,left:-20,bottom:0},children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"gradOverall",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,s.jsxs)("linearGradient",{id:"gradSecurity",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.2}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:0})]}),(0,s.jsxs)("linearGradient",{id:"gradPerf",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.2}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:0})]}),(0,s.jsxs)("linearGradient",{id:"gradCode",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#a855f7",stopOpacity:.2}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:0})]})]}),(0,s.jsx)(d.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.04)"}),(0,s.jsx)(c.K,{dataKey:"dateLabel",tick:{fill:"#6b7280",fontSize:11},axisLine:{stroke:"rgba(255,255,255,0.06)"},tickLine:!1}),(0,s.jsx)(o.B,{domain:[0,100],tick:{fill:"#6b7280",fontSize:11},axisLine:!1,tickLine:!1}),(0,s.jsx)(i.d,{y:j,stroke:"#22c55e",strokeDasharray:"6 4",strokeOpacity:.5,label:{value:"Target ".concat(j),position:"right",fill:"#22c55e",fontSize:10}}),(0,s.jsx)(l.u,{contentStyle:{backgroundColor:"#1a1a24",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#9ca3af"},itemStyle:{color:"#e5e7eb"}}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.u,{type:"monotone",dataKey:"security",stroke:"#ef4444",fill:"url(#gradSecurity)",strokeWidth:1.5,dot:!1,name:"Security"}),(0,s.jsx)(x.u,{type:"monotone",dataKey:"performance",stroke:"#22c55e",fill:"url(#gradPerf)",strokeWidth:1.5,dot:!1,name:"Performance"}),(0,s.jsx)(x.u,{type:"monotone",dataKey:"codeQuality",stroke:"#a855f7",fill:"url(#gradCode)",strokeWidth:1.5,dot:!1,name:"Code Quality"})]}),(0,s.jsx)(x.u,{type:"monotone",dataKey:"score",stroke:"#3b82f6",fill:"url(#gradOverall)",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#3b82f6",stroke:"#1a1a24",strokeWidth:2},name:"Overall"})]})})}},44481:function(e,a,t){"use strict";t.d(a,{w:function(){return c}});var s=t(2265),r=t(92371),n=t(71837),d=t(79286);function c(){let{report:e,target:a,loading:t,error:c,setReport:o,setTarget:i,setLoading:l,setError:x}=(0,r.nq)(),{activeScan:b,setActiveScan:m,completeScan:u}=(0,r.rG)(),j=(0,s.useCallback)(async()=>{if(a){l(!0);try{let e=await (0,n.IK)(a);o(e)}catch(e){x(e.message)}}},[a,o,l,x]),h=(0,s.useCallback)(async e=>{l(!0);try{let a=await (0,n.lZ)(e);return m({scanId:a.scanId,status:"running",agents:{security:{progress:0,status:"queued"},performance:{progress:0,status:"queued"},"code-quality":{progress:0,status:"queued"},"report-generator":{progress:0,status:"queued"}},startedAt:new Date().toISOString()}),a}catch(e){throw x(e.message),e}},[m,l,x]);(0,s.useEffect)(()=>{let e=(0,d.gN)(e=>{u(e.scanId,e.score,e.status),j()}),a=(0,d.DF)(()=>{m(null),l(!1)});return()=>{e(),a()}},[u,m,j,l]);let g=(null==e?void 0:e.agentResults.find(e=>"security"===e.agentType))||null,p=(null==e?void 0:e.agentResults.find(e=>"performance"===e.agentType))||null,f=(null==e?void 0:e.agentResults.find(e=>"code-quality"===e.agentType))||null,y=((null==e?void 0:e.agentResults.flatMap(e=>e.findings))||[]).reduce((e,a)=>(e[a.severity]=(e[a.severity]||0)+1,e),{});return{report:e,target:a,loading:t,error:c,activeScan:b,securityResult:g,performanceResult:p,codeQualityResult:f,findingsBySeverity:y,setTarget:i,startScan:h,refresh:j}}},93448:function(e,a,t){"use strict";t.d(a,{$G:function(){return b},Sy:function(){return x},Uc:function(){return d},Uz:function(){return c},cn:function(){return n},dH:function(){return l},pK:function(){return o},td:function(){return i}});var s=t(61994),r=t(53335);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m6)((0,s.W)(a))}function d(e){return e>=95?"healthy":e>=80?"warning":"critical"}function c(e){return e>=95?"text-kpi-pass":e>=80?"text-kpi-warn":"text-kpi-fail"}function o(e){return({critical:"bg-red-500/15 text-red-400 border-red-500/30",high:"bg-orange-500/15 text-orange-400 border-orange-500/30",medium:"bg-amber-500/15 text-amber-400 border-amber-500/30",low:"bg-blue-500/15 text-blue-400 border-blue-500/30",info:"bg-gray-500/15 text-gray-400 border-gray-500/30"})[e]}function i(e){if(0===e)return"0 B";let a=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,a)).toFixed(1))," ").concat(["B","KB","MB","GB"][a])}function l(e){return e<1e3?"".concat(Math.round(e),"ms"):"".concat((e/1e3).toFixed(1),"s")}function x(e){let a="string"==typeof e?new Date(e):e,t=Math.floor((Date.now()-a.getTime())/6e4);if(t<1)return"just now";if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return s<24?"".concat(s,"h ago"):"".concat(Math.floor(s/24),"d ago")}function b(e,a){return e.length<=a?e:e.slice(0,a)+"..."}},79286:function(e,a,t){"use strict";t.d(a,{$j:function(){return c},DF:function(){return l},H0:function(){return x},WH:function(){return b},gN:function(){return i},zP:function(){return o}});var s=t(68680);let r=t(40257).env.WS_URL||"https://vzy-api-gro1.onrender.com",n=null,d={"scan:progress":new Set,"scan:complete":new Set,"scan:error":new Set,"batch:progress":new Set,"batch:complete":new Set};function c(){return(null==n?void 0:n.connected)||((n=(0,s.io)(r,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:10,auth:{token:localStorage.getItem("vzy_token")}})).on("connect",()=>{console.info("[WS] Connected:",null==n?void 0:n.id)}),n.on("disconnect",e=>{console.warn("[WS] Disconnected:",e)}),n.on("scan:progress",e=>{d["scan:progress"].forEach(a=>a(e))}),n.on("scan:complete",e=>{d["scan:complete"].forEach(a=>a(e))}),n.on("scan:error",e=>{d["scan:error"].forEach(a=>a(e))}),n.on("batch:progress",e=>{d["batch:progress"].forEach(a=>a(e))}),n.on("batch:complete",e=>{d["batch:complete"].forEach(a=>a(e))})),n}function o(){null==n||n.disconnect(),n=null}function i(e){return d["scan:complete"].add(e),()=>{d["scan:complete"].delete(e)}}function l(e){return d["scan:error"].add(e),()=>{d["scan:error"].delete(e)}}function x(e){return d["batch:progress"].add(e),()=>{d["batch:progress"].delete(e)}}function b(e){return d["batch:complete"].add(e),()=>{d["batch:complete"].delete(e)}}}},function(e){e.O(0,[809,137,324,96,642,935,974,382,971,117,744],function(){return e(e.s=3434)}),_N_E=e.O()}]);