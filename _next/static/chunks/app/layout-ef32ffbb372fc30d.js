(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{39665:function(e,t,n){Promise.resolve().then(n.t.bind(n,87621,23)),Promise.resolve().then(n.t.bind(n,57736,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,17525))},94766:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},61641:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]])},25330:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},40476:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])},10866:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},95805:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},11239:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},17525:function(e,t,n){"use strict";n.d(t,{Shell:function(){return E}});var r=n(57437),a=n(2265),c=n(35475),s=n(27648),o=n(79205);let i=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=n(88906),u=n(40476),d=n(25330),h=n(10866),f=n(95805);let m=(0,o.Z)("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);var g=n(11239),p=n(10407);let x=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var y=n(93448),b=n(92371);let v=[{label:"Overview",href:"/",icon:i,roles:["admin","devops","developer","executive"]},{label:"Security",href:"/security",icon:l.Z,roles:["admin","devops","developer","executive"]},{label:"Performance",href:"/performance",icon:u.Z,roles:["admin","devops","developer","executive"]},{label:"Code Quality",href:"/code-quality",icon:d.Z,roles:["admin","devops","developer","executive"]},{label:"Control Center",href:"/control-center",icon:h.Z,roles:["admin","devops"]},{label:"Users",href:"/users",icon:f.Z,roles:["admin"]},{label:"Reporting",href:"/reporting",icon:m,roles:["admin","devops","developer","executive"]}];function k(){let e=(0,c.usePathname)(),{sidebarCollapsed:t,toggleSidebar:n}=(0,b.HB)(),{user:a}=(0,b.tN)(),o=v.filter(e=>!a||e.roles.includes(a.role));return(0,r.jsxs)("aside",{className:(0,y.cn)("fixed left-0 top-0 z-40 h-screen flex flex-col border-r border-white/[0.06] bg-surface-1 transition-all duration-300",t?"w-[68px]":"w-[240px]"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 px-4 h-16 border-b border-white/[0.06]",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-gradient-to-br from-brand-500 to-cyan-500 flex items-center justify-center",children:(0,r.jsx)(g.Z,{className:"w-4 h-4 text-white"})}),!t&&(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-white tracking-tight",children:"VZY Agent"}),(0,r.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"OTT Monitor"})]})]}),(0,r.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.map(n=>{let a=e===n.href||"/"!==n.href&&e.startsWith(n.href),c=n.icon;return(0,r.jsxs)(s.default,{href:n.href,className:(0,y.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 group",a?"bg-brand-600/15 text-brand-400 border-glow":"text-gray-400 hover:text-gray-200 hover:bg-white/[0.04]"),children:[(0,r.jsx)(c,{className:(0,y.cn)("w-[18px] h-[18px] flex-shrink-0 transition-colors",a?"text-brand-400":"text-gray-500 group-hover:text-gray-300")}),!t&&(0,r.jsx)("span",{className:"truncate",children:n.label})]},n.href)})}),(0,r.jsx)("div",{className:"p-3 border-t border-white/[0.06]",children:(0,r.jsx)("button",{onClick:n,className:"w-full flex items-center justify-center p-2 rounded-lg text-gray-500 hover:text-gray-300 hover:bg-white/[0.04] transition-colors","aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?(0,r.jsx)(p.Z,{className:"w-4 h-4"}):(0,r.jsx)(x,{className:"w-4 h-4"})})})]})}var w=n(71837),N=n(51817),j=n(61641);let S=(0,o.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var _=n(94766);let Z=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),M=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function z(){let{report:e}=(0,b.nq)(),{user:t,logout:n}=(0,b.tN)(),{activeScan:a,setActiveScan:c}=(0,b.rG)(),s=e?(0,y.Uc)(e.kpiScore.overallScore):null;return(0,r.jsxs)("header",{className:"h-16 border-b border-white/[0.06] bg-surface-1/80 backdrop-blur-lg flex items-center justify-between px-6 sticky top-0 z-30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:(0,y.cn)("status-dot","healthy"===s&&"status-dot-healthy","warning"===s&&"status-dot-warning","critical"===s&&"status-dot-critical")}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-200",children:e.target.url||e.target.repoPath})]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Last scan: ",(0,y.Sy)(e.generatedAt)]})]}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-brand-600/15 border border-brand-500/30",children:[(0,r.jsx)(N.Z,{className:"w-3.5 h-3.5 text-brand-400 animate-spin"}),(0,r.jsx)("span",{className:"text-xs font-medium text-brand-400",children:"Scanning..."}),(0,r.jsx)("button",{onClick:async()=>{try{await (0,w.bx)(a.scanId)}catch(e){}c(null)},className:"ml-1 p-0.5 rounded hover:bg-red-500/20 transition-colors",title:"Abort scan",children:(0,r.jsx)(j.Z,{className:"w-3.5 h-3.5 text-red-400"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{className:"btn-ghost p-2 relative","aria-label":"System health",children:[(0,r.jsx)(S,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-kpi-pass"})]}),(0,r.jsxs)("button",{className:"btn-ghost p-2 relative","aria-label":"Notifications",children:[(0,r.jsx)(_.Z,{className:"w-4 h-4"}),e&&e.criticalFindings.length>0&&(0,r.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 flex items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white",children:e.criticalFindings.length>9?"9+":e.criticalFindings.length})]}),t&&(0,r.jsxs)("div",{className:"flex items-center gap-2 pl-3 border-l border-white/[0.06]",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-full bg-brand-600/30 flex items-center justify-center",children:(0,r.jsx)(Z,{className:"w-3.5 h-3.5 text-brand-400"})}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-gray-200",children:t.name}),(0,r.jsx)("div",{className:"text-[10px] text-gray-500 uppercase",children:t.role})]}),(0,r.jsx)("button",{onClick:()=>{n(),window.location.href="/vzy-ott-verification-agent/login"},className:"btn-ghost p-1.5 ml-1","aria-label":"Logout",children:(0,r.jsx)(M,{className:"w-3.5 h-3.5"})})]})]})]})}var C=n(79286);function E(e){let{children:t}=e,{sidebarCollapsed:n}=(0,b.HB)(),{target:s,report:o,setReport:i,setTarget:l,setLoading:u,setError:d}=(0,b.nq)(),{token:h}=(0,b.tN)(),{completeScan:f,setActiveScan:m}=(0,b.rG)(),g=(0,c.usePathname)(),p=(0,c.useRouter)(),[x,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{v(!0)},[]);let N="/login"===g;return((0,a.useEffect)(()=>{!x||h||N||p.replace("/login")},[x,h,N,p]),(0,a.useEffect)(()=>{if(!h||N||!s)return;let e=!1;return u(!0),(0,w.IK)(s).then(t=>{e||i(t)}).catch(t=>{e||d(t.message)}),()=>{e=!0}},[h,N,s,i,u,d]),(0,a.useEffect)(()=>{if(!h||N)return;(0,C.$j)();let e=(0,C.gN)(e=>{f(e.scanId,e.score,e.status),s&&(0,w.IK)(s).then(i).catch(()=>{})}),t=(0,C.DF)(e=>{m(null)});return()=>{e(),t(),(0,C.zP)()}},[h,N,s,i,f,m]),N)?(0,r.jsx)(r.Fragment,{children:t}):x&&h?(0,r.jsxs)("div",{className:"min-h-screen bg-surface-0",children:[(0,r.jsx)(k,{}),(0,r.jsxs)("div",{className:(0,y.cn)("transition-all duration-300",n?"ml-[68px]":"ml-[240px]"),children:[(0,r.jsx)(z,{}),(0,r.jsx)("main",{className:"p-6",children:t})]})]}):null}},71837:function(e,t,n){"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("vzy_token"),r=await fetch("".concat("https://vzy-api-gro1.onrender.com/api").concat(e),{...t,headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{},...t.headers}});if(!r.ok){let e=await r.json().catch(()=>({error:r.statusText}));throw new a(r.status,e.error||r.statusText)}return r.json()}n.d(t,{Aj:function(){return s},FX:function(){return i},IK:function(){return c},Nq:function(){return p},Qx:function(){return y},Rf:function(){return m},bx:function(){return l},h8:function(){return x},hO:function(){return h},iE:function(){return u},lZ:function(){return o},r4:function(){return g},rF:function(){return d},te:function(){return b},x4:function(){return f}});class a extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}async function c(e){return r("/reports/latest?target=".concat(encodeURIComponent(e)))}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return r("/trends?target=".concat(encodeURIComponent(e),"&days=").concat(t))}async function o(e){return r("/scans",{method:"POST",body:JSON.stringify(e)})}async function i(e){return r("/scans/batch",{method:"POST",body:JSON.stringify(e)})}async function l(e){return r("/scans/".concat(e,"/abort"),{method:"POST"})}async function u(){return r("/config")}async function d(e){return r("/config",{method:"PATCH",body:JSON.stringify(e)})}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return r("/webhooks/logs?limit=".concat(e))}async function f(e,t){return r("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async function m(){return r("/auth/users")}async function g(e){return r("/auth/users",{method:"POST",body:JSON.stringify(e)})}async function p(e,t){return r("/auth/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async function x(e){return r("/auth/users/".concat(e),{method:"DELETE"})}async function y(){return r("/health")}async function b(e){return r("/jira/create",{method:"POST",body:JSON.stringify({findingId:e})})}},92371:function(e,t,n){"use strict";n.d(t,{HB:function(){return l},eX:function(){return i},nq:function(){return s},rG:function(){return o},tN:function(){return c}});var r=n(59625),a=n(89134);let c=(0,r.Ue)()((0,a.tJ)((e,t)=>({user:null,token:null,setAuth:(t,n)=>{e({user:t,token:n}),localStorage.setItem("vzy_token",n),document.cookie="vzy_token=".concat(n,"; path=/; max-age=").concat(86400,"; SameSite=Lax")},logout:()=>{e({user:null,token:null}),localStorage.removeItem("vzy_token"),document.cookie="vzy_token=; path=/; max-age=0"},hasRole:e=>{let n=t().user;return!!n&&e.includes(n.role)}}),{name:"vzy-auth"})),s=(0,r.Ue)(e=>({report:null,target:"",loading:!1,error:null,setReport:t=>e({report:t,error:null}),setTarget:t=>e({target:t}),setLoading:t=>e({loading:t}),setError:t=>e({error:t,loading:!1})})),o=(0,r.Ue)((e,t)=>({activeScan:null,scanHistory:[],setActiveScan:t=>e({activeScan:t}),updateAgentProgress:(n,r,a,c)=>{let s=t().activeScan;s&&s.scanId===n&&e({activeScan:{...s,agents:{...s.agents,[r]:{progress:a,status:c}}}})},completeScan:(t,n,r)=>{e(e=>({activeScan:null,scanHistory:[{scanId:t,score:n,status:r,timestamp:new Date().toISOString()},...e.scanHistory.slice(0,49)]}))}})),i=(0,r.Ue)(e=>({batchId:null,batchScans:[],batchRunning:!1,startBatch:(t,n)=>e({batchId:t,batchScans:n.map(e=>({...e,status:"queued"})),batchRunning:!0}),updateBatchEntry:(t,n)=>e(e=>({batchScans:e.batchScans.map(e=>e.scanId===t?{...e,...n}:e)})),clearBatch:()=>e({batchId:null,batchScans:[],batchRunning:!1})})),l=(0,r.Ue)()((0,a.tJ)(e=>({sidebarCollapsed:!1,trendRange:30,toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setTrendRange:t=>e({trendRange:t})}),{name:"vzy-ui"}))},93448:function(e,t,n){"use strict";n.d(t,{$G:function(){return h},Sy:function(){return d},Uc:function(){return s},Uz:function(){return o},cn:function(){return c},dH:function(){return u},pK:function(){return i},td:function(){return l}});var r=n(61994),a=n(53335);function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}function s(e){return e>=95?"healthy":e>=80?"warning":"critical"}function o(e){return e>=95?"text-kpi-pass":e>=80?"text-kpi-warn":"text-kpi-fail"}function i(e){return({critical:"bg-red-500/15 text-red-400 border-red-500/30",high:"bg-orange-500/15 text-orange-400 border-orange-500/30",medium:"bg-amber-500/15 text-amber-400 border-amber-500/30",low:"bg-blue-500/15 text-blue-400 border-blue-500/30",info:"bg-gray-500/15 text-gray-400 border-gray-500/30"})[e]}function l(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])}function u(e){return e<1e3?"".concat(Math.round(e),"ms"):"".concat((e/1e3).toFixed(1),"s")}function d(e){let t="string"==typeof e?new Date(e):e,n=Math.floor((Date.now()-t.getTime())/6e4);if(n<1)return"just now";if(n<60)return"".concat(n,"m ago");let r=Math.floor(n/60);return r<24?"".concat(r,"h ago"):"".concat(Math.floor(r/24),"d ago")}function h(e,t){return e.length<=t?e:e.slice(0,t)+"..."}},79286:function(e,t,n){"use strict";n.d(t,{$j:function(){return o},DF:function(){return u},H0:function(){return d},WH:function(){return h},gN:function(){return l},zP:function(){return i}});var r=n(68680);let a=n(40257).env.WS_URL||"https://vzy-api-gro1.onrender.com",c=null,s={"scan:progress":new Set,"scan:complete":new Set,"scan:error":new Set,"batch:progress":new Set,"batch:complete":new Set};function o(){return(null==c?void 0:c.connected)||((c=(0,r.io)(a,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:10,auth:{token:localStorage.getItem("vzy_token")}})).on("connect",()=>{console.info("[WS] Connected:",null==c?void 0:c.id)}),c.on("disconnect",e=>{console.warn("[WS] Disconnected:",e)}),c.on("scan:progress",e=>{s["scan:progress"].forEach(t=>t(e))}),c.on("scan:complete",e=>{s["scan:complete"].forEach(t=>t(e))}),c.on("scan:error",e=>{s["scan:error"].forEach(t=>t(e))}),c.on("batch:progress",e=>{s["batch:progress"].forEach(t=>t(e))}),c.on("batch:complete",e=>{s["batch:complete"].forEach(t=>t(e))})),c}function i(){null==c||c.disconnect(),c=null}function l(e){return s["scan:complete"].add(e),()=>{s["scan:complete"].delete(e)}}function u(e){return s["scan:error"].add(e),()=>{s["scan:error"].delete(e)}}function d(e){return s["batch:progress"].add(e),()=>{s["batch:progress"].delete(e)}}function h(e){return s["batch:complete"].add(e),()=>{s["batch:complete"].delete(e)}}},2778:function(){},87621:function(e){e.exports={style:{fontFamily:"'__Inter_1270ee', '__Inter_Fallback_1270ee'",fontStyle:"normal"},className:"__className_1270ee",variable:"__variable_1270ee"}},57736:function(e){e.exports={style:{fontFamily:"'__JetBrains_Mono_f3919a', '__JetBrains_Mono_Fallback_f3919a'",fontStyle:"normal"},className:"__className_f3919a",variable:"__variable_f3919a"}}},function(e){e.O(0,[501,809,137,324,184,971,117,744],function(){return e(e.s=39665)}),_N_E=e.O()}]);